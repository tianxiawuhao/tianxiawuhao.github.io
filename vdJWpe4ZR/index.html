<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="referrer" content="never">
<meta name="keywords" content="">
<meta name="description" content="欢迎访问[tianxia]的个人博客">
<meta name="author" content="kveln">
<title>在Centos7.9手动安装Nexus3 | tianxia</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">
<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link
  href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
  rel='stylesheet' type='text/css'>
<link rel="alternate" type="application/rss+xml" title="在Centos7.9手动安装Nexus3 | tianxia » Feed"
  href="https://tianxiawuhao.github.io/atom.xml">
<link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/androidstudio.min.css">
<link href="https://tianxiawuhao.github.io/styles/main.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/css/live2d.css">

<script>hljs.initHighlightingOnLoad();</script>

  <meta property="og:description" content="在Centos7.9手动安装Nexus3" />
  <meta property="og:url" content="https://tianxiawuhao.github.io/vdJWpe4ZR/" />
  <meta property="og:locale" content="zh-CN" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="tianxia" />
  <!-- <script src="../assets/styles/scripts/tocScript.js"></script> -->
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tianxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="https://tianxiawuhao.github.io">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1742729663519"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <!-- Page Header -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tianxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="https://tianxiawuhao.github.io">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1742729663519"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<header class="masthead" style="background-image: url('https://tianxiawuhao.github.io/media/images/home-bg.jpg')">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        
          <!-- 没Title为其他页面Header -->
          
            <!-- 没Title并且有headerType为Post：文章Header -->
            <div class="post-heading">
              <span class="tags">
                
                <a href="https://tianxiawuhao.github.io/NdxF1vK3u/" class="tag">运维</a>
                
              </span>
              <h1>在Centos7.9手动安装Nexus3</h1>
              <span class="meta">
                Posted on
                2023-01-17，9 min read
              </span>
            </div>
          
        
      </div>
    </div>
  </div>
</header>
  <!-- Post Content -->
  <article id="post-content-article">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto post-content-container">
          
          <img class="post-feature-header-image" src="https://tianxiawuhao.github.io/post-images/vdJWpe4ZR.png" alt="封面图">
          </img>
          
          <blockquote>
<p>dockers安装很方便，但是有时候我们不可以选择docker安装的时候，就手动安装吧。</p>
</blockquote>
<hr>
<h3 id="一-安装jdk"><strong>一、安装JDK</strong></h3>
<p>首先新的环境虚拟机有自己自带的openjdk，在安装jdk前需要先把虚拟机的卸掉，防止多个jdk冲突，下面是卸载步骤：</p>
<pre><code class="language-shell"> #查看已安装的openjdk： 
 rpm -qa | grep openjdk 
 #结果显示存在的openjdk： 
 java-1.8.0-openjdk-1.8.0.161-2.b14.el7.x86_64 #版本显示不一  
 #执行批量删除命令，删除
 openjdk rpm -qa | grep openjdk |xargs rpm -e --nodeps  
 #再次查看rpm -qa | grep openjdk 是否还存在
</code></pre>
<p>下载地址：<a href="https://link.zhihu.com/?target=https%3A//www.oracle.com/java/technologies/downloads/">Java Downloads | Oracle</a></p>
<pre><code class="language-shell">#解压命令  
tar -zxvf jdk-8u181-linux-x64.tar.gz  
#重命名 
mv jdk-8u181-linux-x64 JAVA
</code></pre>
<p>配置环境变量</p>
<pre><code class="language-shell">#配置JDK环境变量 vim /etc/profile,在文件末追加如下内容:     
 export JAVA_HOME=jdk的根目录     
 export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar     
 export PATH=$PATH:$JAVA_HOME/bin  保存退出  
#使添加在文件中的配置信息马上生效: 
 source /etc/profile  
#查看JDK安装是否成功：
 java -version
</code></pre>
<hr>
<h3 id="二-安装maven"><strong>二、安装MAVEN</strong></h3>
<p>进入maven官网下载最新<a href="https://maven.apache.org/download.cgi">maven</a>，下载后放到/usr/local目录，解压（具体版本号改为下载对应的）</p>
<p><strong>1. 解压</strong></p>
<pre><code class="language-shell">tar -xzf apache-maven-3.9.0-bin.tar.gz
</code></pre>
<p><strong>2. 移动目录</strong></p>
<pre><code class="language-shell">mv apache-maven-3.9.0 /opt/maven
</code></pre>
<p><strong>3. 配置环境变量</strong></p>
<pre><code class="language-shell">vi /etc/profile

export MAVEN_HOME=/opt/maven/
export PATH=$MAVEN_HOME/bin:$PATH
#加载
source /etc/profile
</code></pre>
<p><strong>4. 查看maven是否配置成功</strong></p>
<pre><code class="language-shell">mvn -v
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://tianxiawuhao.github.io/post-images/f9f51893f25dcb9257f732f6441a12b5.png" alt="" loading="lazy"></figure>
<p><strong>5. 配置</strong></p>
<pre><code class="language-shell">cd /opt/maven/conf
vi settings.xml
</code></pre>
<pre><code class="language-xml">&lt;localRepository&gt;/usr/local/maven/repo&lt;/localRepository&gt;
</code></pre>
<p><strong>6. 配置阿里云镜像</strong></p>
<pre><code class="language-xml">&lt;mirror&gt;
     &lt;id&gt;alimaven&lt;/id&gt;
     &lt;name&gt;aliyun maven&lt;/name&gt;
     &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
     &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
&lt;/mirror&gt;
</code></pre>
<hr>
<h3 id="三-下载安装nexus3"><strong>三、下载安装Nexus3</strong></h3>
<p><strong>1、下载最新Nexus3安装包</strong></p>
<p>https://my.sonatype.com/ 在 Latest Releases 标签下， 下载最新nexus repository安装包</p>
<p><strong>2、解压到 /usr/local/nexus/ 目录下</strong></p>
<pre><code class="language-shell">tar -zxvf nexus-3.37.3-02-unix.tar.gz
 
 
[root@tcosmo-szls01 nexus]# pwd
/usr/local/nexus
 
# 解压完会有两个目录:
[root@tcosmo-szls01 nexus]# ll
total 0
drwxr-xr-x. 10 root root 181 Jan 26 11:08 nexus-3.37.3-02  ## 包含了 Nexus 运行所需要的文件。是 Nexus 运行必须的
drwxr-xr-x.  3 root root  20 Jan 26 11:08 sonatype-work  ## 包含了 Nexus 生成的配置文件、日志文件、仓库文件等。当我们需要备份 Nexus 的时候默认备份此目录即可
</code></pre>
<p><strong>3、配置环境变量，并使其生效</strong></p>
<pre><code class="language-shell">[root@tcosmo-szls01 nexus]# vim /etc/profile
 
export NEXUS_HOME=/usr/local/nexus/nexus-3.37.3-02
export PATH=$PATH:$NEXUS_HOME/bin
 
[root@tcosmo-szls01 nexus]# source /etc/profile
 
[root@tcosmo-szls01 nexus]# nexus -version
WARNING: ************************************************************
WARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!
WARNING: ************************************************************
Usage: /usr/local/nexus/nexus-3.37.3-02/bin/nexus {start|stop|run|run-redirect|status|restart|force-reload}
</code></pre>
<p><strong>4、修改默认启动用户</strong></p>
<pre><code class="language-shell">vim /usr/local/nexus/nexus-3.37.3-02/bin/nexus.rc
run_as_user=&quot;root&quot;          #内容就这一行，放开注释，填写用户即可
</code></pre>
<p><strong>5、修改启动端口</strong></p>
<pre><code class="language-shell">vim /usr/local/nexus/nexus-3.37.3-02/etc/nexus-default.properties  #默认就是8081，可以不修改
</code></pre>
<p><strong>6、启动nexus并查看运行状态</strong></p>
<pre><code class="language-shell">[root@tcosmo-szls01 nexus]# nexus start
WARNING: ************************************************************
WARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!
WARNING: ************************************************************
Starting nexus
[root@tcosmo-szls01 nexus]# nexus status
WARNING: ************************************************************
WARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!
WARNING: ************************************************************
nexus is running.
</code></pre>
<p><strong>7、访问系统</strong></p>
<pre><code class="language-shell">访问http://ip:8081，登陆用户admin 密码存放在：/usr/local/nexus/sonatype-work/nexus3/admin.password 目录
 
[root@tcosmo-szls01 nexus]# cat /usr/local/nexus/sonatype-work/nexus3/admin.password
easdsccc-64ab-45c4-9d8a-abh******jfe19
</code></pre>
<p><strong>8、配置nexus开机自启动</strong></p>
<pre><code class="language-shell">vim /etc/rc.d/rc.local
 
/usr/local/nexus/nexus-3.18.1/bin/nexus start  #添加这一行内容
 
chmod 755 /etc/rc.d/rc.local
</code></pre>
<hr>
<h3 id="四-nexus3的使用"><strong>四、Nexus3的使用</strong></h3>
<p><strong>1、在mvn配置中添加nexus的认证信息</strong></p>
<pre><code class="language-xml">&lt;server&gt;
   &lt;id&gt;mynexus-releases&lt;/id&gt;
   &lt;username&gt;admin&lt;/username&gt;
   &lt;password&gt;******&lt;/password&gt;
&lt;/server&gt;
&lt;server&gt;
   &lt;id&gt;mynexus-snapshots&lt;/id&gt;
   &lt;username&gt;admin&lt;/username&gt;
   &lt;password&gt;******&lt;/password&gt;
&lt;/server&gt;
</code></pre>
<p><strong>2、在项目的pom.xml中添加nexus的仓库地址</strong></p>
<p>（如果是多module应用，可以直接在父pom里面配置）</p>
<pre><code class="language-xml">&lt;distributionManagement&gt;
    &lt;repository&gt;
        &lt;id&gt;mynexus-releases&lt;/id&gt;
        &lt;name&gt;maven-releases&lt;/name&gt;
        &lt;url&gt;http://10.206.73.157:8081/repository/maven-releases/&lt;/url&gt;
    &lt;/repository&gt;
    &lt;snapshotRepository&gt;
        &lt;id&gt;mynexus-snapshots&lt;/id&gt;
        &lt;name&gt;maven-snapshots&lt;/name&gt;
        &lt;url&gt;http://10.206.73.157:8081/repository/maven-snapshots/&lt;/url&gt;
    &lt;/snapshotRepository&gt;
&lt;/distributionManagement&gt;
</code></pre>
<p><strong>3、执行deploy命令，完成打包与推送</strong></p>
<pre><code class="language-shell">mvn clean deploy # 如果像强行要求使用者更新本地依赖，可以 -U
</code></pre>
<p>![1643178542(https://tianxiawuhao.github.io/post-images/1643178548537135.png)</p>
<p><strong>4、现在可以在maven-public中查看到我们推送的jar包</strong></p>
<figure data-type="image" tabindex="2"><img src="https://tianxiawuhao.github.io/post-images/1643178589642590.png" alt="image.png" loading="lazy"></figure>
<p><strong>5、在Maven项目中的使用</strong></p>
<ul>
<li>如果我们只有个别依赖需要从我们自己的nexus下载，那么只需要在项目的pom.xml文件中进行配置即可：</li>
</ul>
<pre><code class="language-xml">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;releases&lt;/id&gt;
        &lt;name&gt;maven-public&lt;/name&gt;
        &lt;url&gt;http://10.206.73.157:8081/repository/maven-public/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
<ul>
<li>如果我们有很多依赖都需要从我们自己的nexus下载，那么可以通过修改maven的配置文件，setting.xml增加镜像来实现；</li>
</ul>
<pre><code class="language-xml">&lt;mirror&gt;
  &lt;id&gt;myNexus&lt;/id&gt;
    &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;
    &lt;name&gt;myNexus&lt;/name&gt;
    &lt;url&gt;http://10.206.73.157:8081/repository/maven-public/&lt;/url&gt;
&lt;/mirror&gt;
</code></pre>
<blockquote>
<p>但是，需要注意的是：</p>
<ul>
<li>
<p>当maven的版本高于3.6之后，我们在项目pom.xml中是没有办法使用http协议的仓库地址的，会报错：</p>
<p>maven-default-http-blocker (http://0.0.0.0/): Blocked mirror for repositories</p>
<p>此时，我们要么使用https协议的仓库地址，要么在maven的setting.xml中进行配置；</p>
</li>
<li>
<p>当maven的配置setting.xml中配置了多个mirror镜像的时候，是没有办法同时生效，依次检查的，只有第一个会生效；</p>
<p>这很尴尬，因为我们一般会喜欢在setting.xml中配置阿里云的镜像仓库，不想完全替换成我们自己的。</p>
</li>
</ul>
</blockquote>
<hr>
<p><strong>补充1：Nexus中默认的那些仓库分别是什么作用，有什么区别？</strong></p>
<figure data-type="image" tabindex="3"><img src="https://tianxiawuhao.github.io/post-images/1643178723215806.png" alt="image.png" loading="lazy"></figure>
<p><strong>Type类型的理解：</strong></p>
<ul>
<li>proxy：是远程仓库的代理。比如说在nexus中配置了一个central repository的proxy，当用户向这个proxy请求一个artifact，这个proxy就会先在本地查找，如果找不到的话，就会从远程仓库下载，然后返回给用户，相当于起到一个中转的作用。</li>
<li>Hosted：是宿主仓库，用户可以把自己的一些构件，deploy到hosted中，也可以手工上传构件到hosted里。比如说oracle的驱动程序，ojdbc6.jar，在central repository是获取不到的，就需要手工上传到hosted里，一般用来存放公司自己的jar包；</li>
<li>Group：是仓库组，在maven里没有这个概念，是nexus特有的。目的是将上述多个仓库聚合，对用户暴露统一的地址，这样用户就不需要在pom中配置多个地址，只要统一配置group的地址就可以了右边那个Repository Path可以点击进去，看到仓库中artifact列表。不过要注意浏览器缓存，当你的项目希望在多个repository使用资源时就不需要多次引用了，只需要引用一个group即可。</li>
</ul>
<p><strong>四大仓库的理解：</strong></p>
<ul>
<li>maven-central：代理仓库，使用了proxy模式；</li>
<li>maven-release：用来存放release版本的jar包；（我上面就是推送到了release库里面）</li>
<li>maven-snapshot：用来存放snapshot版本的jar包；</li>
<li><strong>maven-public：maven-central、maven-release和maven-snapshot三个库的合集，对外使用，只要提供这一个group的地址即可。</strong></li>
</ul>
<hr>
<p><strong>补充二：文件描述符Ulimit问题修复</strong></p>
<figure data-type="image" tabindex="4"><img src="https://tianxiawuhao.github.io/post-images/1681733703665735.png" alt="1681733703665735.png" loading="lazy"></figure>
<pre><code class="language-shell">vim /etc/security/limits.conf
 
# 添加以下内容（如果我们是root用户启动的话）：
@root - nofile 65536
 
## 保存后重启系统：
reboot
</code></pre>
<p>之后，此问题即可被修复！</p>
<figure data-type="image" tabindex="5"><img src="https://tianxiawuhao.github.io/post-images/1681734410590121.png" alt="1681734410590121.png" loading="lazy"></figure>

          <div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E4%B8%80-%E5%AE%89%E8%A3%85jdk"><strong>一、安装JDK</strong></a></li>
<li><a href="#%E4%BA%8C-%E5%AE%89%E8%A3%85maven"><strong>二、安装MAVEN</strong></a></li>
<li><a href="#%E4%B8%89-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85nexus3"><strong>三、下载安装Nexus3</strong></a></li>
<li><a href="#%E5%9B%9B-nexus3%E7%9A%84%E4%BD%BF%E7%94%A8"><strong>四、Nexus3的使用</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
          <hr />
          
            <p class="prev-post">上一篇：
              <a href="https://tianxiawuhao.github.io/8j32dqs0d/">
                <span class="post-title">
                  Centos7部署FastDFS&rarr;
                </span>
              </a>
            </p>
          
          
          <p class="next-post">下一篇：
            <a href="https://tianxiawuhao.github.io/w4yOxhPAW/">
              <span class="post-title">
                图的遍历方法&rarr;
              </span>
            </a>
          </p>
          
          <div class="comment" style="text-align: center;">
            

            
            
          </div>
        </div>
      </div>
    </div>
  </article>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <!-- <li class="list-inline-item">
              <a href="https://tianxiawuhao.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li> -->
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>tianxia</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://tianxiawuhao.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://tianxiawuhao.github.io/media/scripts/clean-blog.min.js"></script> -->
  <script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));</script>
  
  <script src="https://tianxiawuhao.github.io/media/scripts/tocScript.js"></script>
</body>

</html>